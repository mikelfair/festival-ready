<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F2CSZ9KX52"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-F2CSZ9KX52');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Festival Ready Questionnaire - Films & Screenplays v002</title>
    <meta name="description" content="Complete our comprehensive questionnaire to generate professional submission materials for films and screenplays">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .main-container {
            width: 100%;
            max-width: 700px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .wizard-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.2);
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        
        .wizard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .home-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .home-button:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.1);
            color: white;
            text-decoration: none;
        }
        
        .wizard-header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .wizard-header p {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .progress-container {
            background: rgba(255,255,255,0.2);
            height: 8px;
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: #ff6b6b;
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 6.67%;
        }
        
        .step-content {
            padding: 40px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .step {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .step h2 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .step p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="number"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }
        
        .checkbox-item:hover {
            background: #e9ecef;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .radio-item:hover {
            background: #e9ecef;
        }
        
        .radio-item input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .radio-item.selected {
            background: #667eea;
            color: white;
        }
        
        .wizard-navigation {
            background: #f8f9fa;
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e9ecef;
        }
        
        .nav-button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .nav-button.primary {
            background: #667eea;
            color: white;
        }
        
        .nav-button.primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .nav-button.secondary {
            background: #6c757d;
            color: white;
        }
        
        .nav-button.secondary:hover {
            background: #5a6268;
        }
        
        .nav-button:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .step-indicator {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }
        
        .file-upload-area {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-upload-area:hover {
            background: #f0f3ff;
            border-color: #5a6fd8;
        }
        
        .file-upload-area.dragover {
            background: #e8f2ff;
            border-color: #4dabf7;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .upload-text {
            color: #333;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            color: #666;
            font-size: 0.9rem;
        }
        
        .file-input {
            display: none;
        }
        
        .uploaded-file {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            color: #155724;
        }
        
        .file-info::before {
            content: '📄';
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .remove-file {
            background: none;
            border: none;
            color: #721c24;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        /* PDF Processing Status Styles */
        .pdf-status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        
        .pdf-status.processing {
            background: #cfe2ff;
            border: 1px solid #b6d4fe;
            color: #084298;
        }
        
        .pdf-status.success {
            background: #d1e7dd;
            border: 1px solid #badbcc;
            color: #0f5132;
        }
        
        .pdf-status.error {
            background: #f8d7da;
            border: 1px solid #f5c2c7;
            color: #842029;
        }
        
        .pdf-progress {
            background: rgba(0, 0, 0, 0.1);
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .pdf-progress-bar {
            background: #0d6efd;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .text-stats {
            margin-top: 5px;
            font-size: 0.85rem;
            color: #666;
        }
        
        small {
            display: block;
            margin-top: 5px;
            font-size: 0.875rem;
        }
        
        /* Honeypot field - visually hidden but accessible to bots */
        .ohnohoney {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            height: 0;
            width: 0;
            z-index: -1;
        }
        
        .ohnohoney input {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            height: 0;
            width: 0;
            z-index: -1;
            border: none;
            background: transparent;
        }
        
        /* Book Banner Styles - No longer fixed position */
        .book-banner-container {
            width: 100%;
            max-width: 728px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }
        
        .book-banner {
            display: block;
            transition: transform 0.3s ease;
        }
        
        .book-banner:hover {
            transform: scale(1.02);
        }
        
        .book-banner img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        @media (max-width: 768px) {
            .main-container {
                gap: 15px;
            }
            
            .wizard-container {
                margin: 10px;
            }
            
            .wizard-header {
                padding: 20px;
            }
            
            .wizard-header h1 {
                font-size: 1.5rem;
            }
            
            .home-button {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                top: 15px;
                left: 15px;
            }
            
            .step-content {
                padding: 25px;
                min-height: 350px;
            }
            
            .wizard-navigation {
                padding: 20px 25px;
            }
            
            .checkbox-group {
                flex-direction: column;
            }
            
            .book-banner-container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="wizard-container">
            <div class="wizard-header">
                <a href="index.html" class="home-button" title="Return to Homepage">🏠</a>
                <h1>🎬 Festival Ready Questionnaire</h1>
                <p>Help us create the perfect submission materials for your creative work</p>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </div>
            
            <div class="step-content">
                <!-- Step 1: NEW - Submission Type Selection (Film vs Screenplay) -->
                <div class="step active" id="step1">
                    <h2>What type of creative work are you submitting to festivals? *</h2>
                    <p>This helps us tailor the questionnaire and recommendations specifically for your submission type.</p>
                    <div class="form-group">
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="submission-film" name="submissionType" value="film" required>
                                <label for="submission-film">🎬 <strong>Film or Video</strong><br>
                                <small style="color: #666; margin-left: 20px;">Feature films, short films, documentaries, music videos, series episodes</small></label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="submission-screenplay" name="submissionType" value="screenplay" required>
                                <label for="submission-screenplay">📝 <strong>Screenplay</strong><br>
                                <small style="color: #666; margin-left: 20px;">Written scripts for films, TV episodes, or web series</small></label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Country (MOVED FROM STEP 15) -->
                <div class="step" id="step2">
                    <!-- Honeypot Field - DO NOT REMOVE -->
                    <div class="ohnohoney" aria-hidden="true">
                        <label for="website">Website</label>
                        <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
                    </div>
                    
                    <h2>What country are you from?</h2>
                    <p>This helps us better understand our user base and tailor festival recommendations.</p>
                    <div class="form-group">
                        <label for="country">Select Your Country</label>
                        <select id="country" name="country" required>
                            <option value="">-- Select Country --</option>
                            <option value="US">United States</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                            <option value="" disabled>──────────────────</option>
                            <option value="AR">Argentina</option>
                            <option value="AT">Austria</option>
                            <option value="BD">Bangladesh</option>
                            <option value="BE">Belgium</option>
                            <option value="BR">Brazil</option>
                            <option value="CL">Chile</option>
                            <option value="CN">China</option>
                            <option value="CO">Colombia</option>
                            <option value="CZ">Czech Republic</option>
                            <option value="DK">Denmark</option>
                            <option value="EG">Egypt</option>
                            <option value="FI">Finland</option>
                            <option value="FR">France</option>
                            <option value="DE">Germany</option>
                            <option value="GR">Greece</option>
                            <option value="HU">Hungary</option>
                            <option value="IN">India</option>
                            <option value="ID">Indonesia</option>
                            <option value="IE">Ireland</option>
                            <option value="IL">Israel</option>
                            <option value="IT">Italy</option>
                            <option value="JP">Japan</option>
                            <option value="KE">Kenya</option>
                            <option value="MY">Malaysia</option>
                            <option value="MX">Mexico</option>
                            <option value="MA">Morocco</option>
                            <option value="NL">Netherlands</option>
                            <option value="NZ">New Zealand</option>
                            <option value="NG">Nigeria</option>
                            <option value="NO">Norway</option>
                            <option value="PK">Pakistan</option>
                            <option value="PE">Peru</option>
                            <option value="PH">Philippines</option>
                            <option value="PL">Poland</option>
                            <option value="PT">Portugal</option>
                            <option value="RO">Romania</option>
                            <option value="RU">Russia</option>
                            <option value="SG">Singapore</option>
                            <option value="ZA">South Africa</option>
                            <option value="KR">South Korea</option>
                            <option value="ES">Spain</option>
                            <option value="SE">Sweden</option>
                            <option value="CH">Switzerland</option>
                            <option value="TH">Thailand</option>
                            <option value="TR">Turkey</option>
                            <option value="UA">Ukraine</option>
                            <option value="GB">United Kingdom</option>
                            <option value="VE">Venezuela</option>
                            <option value="VN">Vietnam</option>
                            <option value="OTHER">Other</option>
                        </select>
                    </div>
                </div>
                
                <!-- Step 3: Title (REQUIRED) (was step 1) -->
                <div class="step" id="step3">
                    <h2>What's the title of your creative work? *</h2>
                    <p>This will be the main title used in all your submission materials.</p>
                    <div class="form-group">
                        <label for="title">Title <span style="color: #e74c3c;">*</span></label>
                        <input type="text" id="title" name="title" placeholder="Enter your title" required>
                    </div>
                </div>
                
                <!-- Step 3: Writers (REQUIRED) (was step 2) -->
                <div class="step" id="step3">
                    <h2>Who are the primary writers and story contributors? *</h2>
                    <p>Include all writers, co-writers, and anyone who contributed significantly to the story.</p>
                    <div class="form-group">
                        <label for="writers">Writers & Contributors <span style="color: #e74c3c;">*</span></label>
                        <textarea id="writers" name="writers" placeholder="List all writers and contributors..." required></textarea>
                    </div>
                </div>
                
                <!-- Step 4: Genre (was step 3) -->
                <div class="step" id="step4">
                    <h2>What genre(s) best describe your story?</h2>
                    <p>Select all that apply. This helps with festival category recommendations.</p>
                    <div class="form-group">
                        <label>Select Genre(s)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="action-thriller" name="genres" value="action-thriller">
                                <label for="action-thriller">Action or Suspense Thriller</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="animation" name="genres" value="animation">
                                <label for="animation">Animation</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="comedy" name="genres" value="comedy">
                                <label for="comedy">Comedy</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="drama" name="genres" value="drama">
                                <label for="drama">Drama</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="experimental" name="genres" value="experimental">
                                <label for="experimental">Experimental</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="fantasy" name="genres" value="fantasy">
                                <label for="fantasy">Fantasy</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="horror" name="genres" value="horror">
                                <label for="horror">Horror</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="music-video" name="genres" value="music-video">
                                <label for="music-video">Music Video</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="scifi" name="genres" value="scifi">
                                <label for="scifi">Sci-Fi</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="other-genre" name="genres" value="other">
                                <label for="other-genre">Other</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 5: Page Count (REQUIRED) (was step 4) -->
                <div class="step" id="step5">
                    <h2>How many pages is this version of the screenplay? *</h2>
                    <p>This helps determine the appropriate festival categories and submission guidelines.</p>
                    <div class="form-group">
                        <label for="pageCount">Number of Pages <span style="color: #e74c3c;">*</span></label>
                        <input type="number" id="pageCount" name="pageCount" placeholder="e.g., 90" min="1" max="300" required>
                    </div>
                </div>
                
                <!-- Step 6: Standalone vs Series (REQUIRED) (was step 5) -->
                <div class="step" id="step6">
                    <h2>Is this screenplay a standalone film or part of an ongoing series? *</h2>
                    <p>This affects how we position your story in submission materials.</p>
                    <div class="form-group">
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="standalone" name="storyType" value="standalone" required>
                                <label for="standalone">Standalone film</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="series" name="storyType" value="series" required>
                                <label for="series">An episode in an ongoing series. (Teleplay)</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="undecided" name="storyType" value="undecided" required>
                                <label for="undecided">Undecided</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 7: Mature Content (was step 6) -->
                <div class="step" id="step7">
                    <h2>Does your story contain mature content inappropriate for children? *</h2>
                    <p>This affects festival category selection and content warnings. Detailed descriptions of violence, sexual situations and drug use are examples of mature content that is intended for adults.</p>
                    <div class="form-group">
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="mature-yes" name="matureContent" value="yes" required>
                                <label for="mature-yes">Yes, contains mature content</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="mature-no" name="matureContent" value="no" required>
                                <label for="mature-no">No, appropriate for all audiences</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="mature-unsure" name="matureContent" value="unsure" required>
                                <label for="mature-unsure">I'm not sure</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 8: Main Characters (was step 7) -->
                <div class="step" id="step8">
                    <h2>Who are the main character(s)?</h2>
                    <p>List the primary characters that drive your story forward.</p>
                    <div class="form-group">
                        <label for="mainCharacters">Describe Your Main Characters</label>
                        <textarea id="mainCharacters" name="mainCharacters" placeholder="Example: Robert is the father and he interacts with his 9 year old daughter Rebecca the most in this story."></textarea>
                    </div>
                </div>
                
                <!-- Step 9: Main Challenge (was step 8) -->
                <div class="step" id="step9">
                    <h2>What is the main challenge or stakes that your protagonist faces?</h2>
                    <p>Describe the central conflict without revealing the ending. If you already have a synopsis or tagline, you can include them here as well.</p>
                    <div class="form-group">
                        <label for="mainChallenge">Main Challenge/Stakes (and optional existing synopsis/tagline)</label>
                        <textarea id="mainChallenge" name="mainChallenge" placeholder="Example: Robert and Rebecca struggle for survival in a snow covered wasteland.

You can also paste your existing synopsis or tagline here if you have one."></textarea>
                    </div>
                </div>
                
                <!-- Step 10: Similar Films (was step 9) -->
                <div class="step" id="step10">
                    <h2>Are there films or series with a similar style or genre?</h2>
                    <p>Think "If you liked [Movie/Show], you'll love this story." This helps with marketing comparisons.</p>
                    <div class="form-group">
                        <label for="similarWorks">Similar Films/Series</label>
                        <textarea id="similarWorks" name="similarWorks" placeholder="List films or series that share similar style, tone, or audience..."></textarea>
                    </div>
                </div>
                
                <!-- Step 11: Influences (was step 10) -->
                <div class="step" id="step11">
                    <h2>What influences did you have while writing this story?</h2>
                    <p>Include writing style, character, or story influences that shaped your screenplay.</p>
                    <div class="form-group">
                        <label for="influences">Writing Influences</label>
                        <textarea id="influences" name="influences" placeholder="Example: Author Stephen King, the Bladerunner movies, etc..."></textarea>
                    </div>
                </div>
                
                <!-- Step 12: Reader Memory (was step 11) -->
                <div class="step" id="step12">
                    <h2>What do you hope readers will remember most about your story?</h2>
                    <p>This helps us craft taglines and synopses that highlight your story's most memorable elements.</p>
                    <div class="form-group">
                        <label for="readerMemory">Most Memorable Aspect</label>
                        <textarea id="readerMemory" name="readerMemory" placeholder="What should stick with readers after they experience your story..."></textarea>
                    </div>
                </div>
                
                <!-- Step 13: Personal Motivation (was step 12) -->
                <div class="step" id="step13">
                    <h2>Why did you decide to write this particular story? *</h2>
                    <p>This helps us create your writer's statement - a key part of festival submissions that helps judges connect with your story on a personal level.</p>
                    <div class="form-group">
                        <label for="personalMotivation">Personal Motivation <span style="color: #e74c3c;">*</span></label>
                        <textarea id="personalMotivation" name="personalMotivation" placeholder="What drove you to write this story..." required></textarea>
                    </div>
                </div>
                
                <!-- Step 14: Optional Script Upload (was step 13) -->
                <div class="step" id="step14">
                    <h2>Optional: Upload or share some text from your screenplay</h2>
                    <p>For the best results, you can upload a PDF of your script or paste the text directly.</p>
                    
                    <!-- Privacy Disclaimer -->
                    <div style="background: #e8f4fd; border: 1px solid #bee5eb; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                        <h4 style="color: #0c5460; margin-bottom: 10px; font-size: 1rem;">🔒 Privacy & Copyright Protection</h4>
                        <p style="color: #0c5460; font-size: 0.9rem; line-height: 1.5; margin: 0;">
                            The information from your script and story are not distributed to others or made public. This information is for your private use and does not affect copyright or give legal use to your script to a third party. Your creative ideas and work will not be used for AI training purposes.
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>Upload Script PDF (Optional)</label>
                        <div class="file-upload-area" id="uploadArea">
                            <div class="upload-icon">📄</div>
                            <div class="upload-text">Click to upload or drag and drop PDF</div>
                            <div class="upload-subtext">PDF files only (max 10MB)</div>
                        </div>
                        <input type="file" id="scriptFile" class="file-input" accept=".pdf">
                        <div id="uploadedFile" class="uploaded-file" style="display: none;">
                            <div class="file-info" id="fileInfo"></div>
                            <button type="button" class="remove-file" id="removeFile">×</button>
                        </div>
                        
                        <!-- PDF Processing Status -->
                        <div id="pdfStatus" class="pdf-status">
                            <div id="pdfStatusMessage"></div>
                            <div class="pdf-progress" id="pdfProgress" style="display: none;">
                                <div class="pdf-progress-bar" id="pdfProgressBar"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 30px;">
                        <label for="scriptText">Or paste as much text from your story or screenplay as you'd like:</label>
                        <textarea id="scriptText" name="scriptText" placeholder="Paste your screenplay text here for best results..." style="min-height: 150px;"></textarea>
                        <div class="text-stats" id="textStats"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalDetails">Additional story details:</label>
                        <textarea id="additionalDetails" name="additionalDetails" placeholder="Any additional details about your story that would help create better submission materials..."></textarea>
                    </div>
                </div>
                
                <!-- Step 15: Email Address (was step 14) -->
                <div class="step" id="step15">
                    <h2>What's your email address?</h2>
                    <p>Please allow 15 minutes for us to send your custom tagline, synopsis, and writer's statement to this email address.</p>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                    </div>
                    <div class="form-group">
                        <label for="emailConfirm">Confirm Email Address</label>
                        <input type="email" id="emailConfirm" name="emailConfirm" placeholder="Re-enter your email address" required>
                        <small style="color: #e74c3c; display: none;" id="emailMismatch">Email addresses don't match</small>
                    </div>
                    <div style="background: #e8f4fd; border: 1px solid #bee5eb; border-radius: 10px; padding: 15px; margin-top: 15px;">
                        <p style="color: #0c5460; font-size: 0.9rem; margin: 0;">
                            🔒 <strong>Privacy:</strong> Your email is only used to send you your results. We don't share your information with any third parties or marketing without your consent.
                        </p>
                    </div>
                    
                    <!-- Email Preferences - UPDATED TO SINGLE CHECKBOX -->
                    <div class="form-group" style="margin-top: 20px;">
                        <div class="checkbox-item">
                            <input type="checkbox" id="marketingEmails" name="marketingEmails" value="yes">
                            <label for="marketingEmails">I'd like to receive monthly emails about Festival Ready app updates and film festival submission discounts.</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="wizard-navigation">
                <button type="button" class="nav-button secondary" id="prevBtn" disabled>← Previous</button>
                <div class="step-indicator">
                    Step <span id="currentStep">1</span> of 15
                </div>
                <button type="button" class="nav-button primary" id="nextBtn">Next →</button>
            </div>
        </div>
        
        <!-- Book Banner - Now in normal document flow -->
        <div class="book-banner-container">
            <a href="https://amzn.to/4naJ4FT" target="_blank" class="book-banner" onclick="trackEvent('book_banner_click', 'engagement', 'questionnaire_amazon_link')">
                <img src="images/festival-books-banner.png" alt="Film Festival Submitter's Handbook & Screenplay Judging Guide - Available on Amazon">
            </a>
        </div>
    </div>

    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- Import Supabase JS Library -->
    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.45.4';
        
        // Initialize Supabase client with real library
        const SUPABASE_URL = 'https://vmfhxkfprrbshwniguaq.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtZmh4a2ZwcnJic2h3bmlndWFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2ODYxNTcsImV4cCI6MjA2NTI2MjE1N30.k0OdvFzcO1nwZzxsgLPcQBeSITmV6dA_ncXpN0cpAgQ';
        
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Make supabase available globally
        window.supabase = supabase;
    </script>

    <script>
        // Configure PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        let currentStepNumber = 1;
        const totalSteps = 15;
        const formData = {};
        let pdfProcessingComplete = false;
        let pdfHasError = false;

        // Navigation elements
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const currentStepSpan = document.getElementById('currentStep');

        // File upload elements
        const uploadArea = document.getElementById('uploadArea');
        const scriptFile = document.getElementById('scriptFile');
        const uploadedFile = document.getElementById('uploadedFile');
        const fileInfo = document.getElementById('fileInfo');
        const removeFile = document.getElementById('removeFile');
        const pdfStatus = document.getElementById('pdfStatus');
        const pdfStatusMessage = document.getElementById('pdfStatusMessage');
        const pdfProgress = document.getElementById('pdfProgress');
        const pdfProgressBar = document.getElementById('pdfProgressBar');

        // Google Analytics event tracking function
        function trackEvent(eventName, category = 'engagement', label = '') {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, {
                    'event_category': category,
                    'event_label': label,
                    'value': 1
                });
            }
        }

        // Initialize wizard
        updateStepDisplay();
        setupEventListeners();
        updateTextStats();

        // Track questionnaire start
        trackEvent('questionnaire_started', 'form', 'festival_ready_questionnaire');

        // Clear honeypot field on page load and monitor it
        document.addEventListener('DOMContentLoaded', function() {
            const honeypot = document.getElementById('website');
            if (honeypot) {
                honeypot.value = '';
                
                // Monitor honeypot interactions
                honeypot.addEventListener('input', function(e) {
                    if (e.target.value) {
                        console.warn('Honeypot field interaction detected');
                    }
                });
            }
        });

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });

            // Show current step
            document.getElementById(`step${currentStepNumber}`).classList.add('active');

            // Update progress bar
            const progress = (currentStepNumber / totalSteps) * 100;
            progressBar.style.width = `${progress}%`;

            // Update step indicator
            currentStepSpan.textContent = currentStepNumber;

            // Update navigation buttons
            prevBtn.disabled = currentStepNumber === 1;
            if (currentStepNumber === totalSteps) {
                nextBtn.textContent = 'Generate Materials →';
                nextBtn.classList.add('primary');
            } else {
                nextBtn.textContent = 'Next →';
            }
        }

        function setupEventListeners() {
            // Navigation buttons
            prevBtn.addEventListener('click', previousStep);
            nextBtn.addEventListener('click', nextStep);

            // Radio button styling
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    // Remove selected class from all radio items in this group
                    const groupName = this.name;
                    document.querySelectorAll(`input[name="${groupName}"]`).forEach(r => {
                        r.closest('.radio-item').classList.remove('selected');
                    });
                    // Add selected class to current item
                    this.closest('.radio-item').classList.add('selected');
                });
            });

            // File upload functionality
            if (uploadArea) {
                uploadArea.addEventListener('click', () => scriptFile.click());
                uploadArea.addEventListener('dragover', handleDragOver);
                uploadArea.addEventListener('drop', handleDrop);
                scriptFile.addEventListener('change', handleFileSelect);
                removeFile.addEventListener('click', handleFileRemove);
            }
            
            // Text stats update
            const scriptText = document.getElementById('scriptText');
            if (scriptText) {
                scriptText.addEventListener('input', updateTextStats);
            }
        }

        function previousStep() {
            if (currentStepNumber > 1) {
                saveCurrentStepData();
                currentStepNumber--;
                updateStepDisplay();
                
                // Track step navigation
                trackEvent('questionnaire_step_back', 'form', `step_${currentStepNumber}`);
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                saveCurrentStepData();
                
                if (currentStepNumber < totalSteps) {
                    currentStepNumber++;
                    updateStepDisplay();
                    
                    // Track step progression
                    trackEvent('questionnaire_step_forward', 'form', `step_${currentStepNumber}`);
                    
                    // Track milestone steps
                    if (currentStepNumber === 4) {
                        trackEvent('questionnaire_quarter_complete', 'form', 'milestone');
                    } else if (currentStepNumber === 8) {
                        trackEvent('questionnaire_half_complete', 'form', 'milestone');
                    } else if (currentStepNumber === 12) {
                        trackEvent('questionnaire_three_quarters_complete', 'form', 'milestone');
                    }
                } else {
                    submitForm();
                }
            }
        }

        function validateCurrentStep() {
            const currentStep = document.getElementById(`step${currentStepNumber}`);
            
            // Required fields validation for specific steps - UPDATED numbers
            const requiredSteps = [1, 2, 3, 5, 6, 7, 13]; // Country, Title, Writers, Page Count, Story Type, Mature Content, Personal Motivation
            
            if (requiredSteps.includes(currentStepNumber)) {
                const requiredFields = currentStep.querySelectorAll('input[required], textarea[required], select[required]');
                
                for (let field of requiredFields) {
                    if (!field.value.trim()) {
                        field.focus();
                        alert('This field is required. Please fill it in before continuing.');
                        return false;
                    }
                }
                
                // Special validation for radio buttons (steps 6 and 7)
                if (currentStepNumber === 6 || currentStepNumber === 7) {
                    const radioGroup = currentStep.querySelector('.radio-group');
                    const checkedRadio = radioGroup.querySelector('input[type="radio"]:checked');
                    if (!checkedRadio) {
                        alert('Please select an option before continuing.');
                        return false;
                    }
                }
            }
            
            // Special validation for checkboxes and radios
            if (currentStepNumber === 4) { // Genre step
                const checkedGenres = currentStep.querySelectorAll('input[name="genres"]:checked');
                if (checkedGenres.length === 0) {
                    alert('Please select at least one genre.');
                    return false;
                }
            }
            
            // PDF validation on step 14
            if (currentStepNumber === 14) {
                if (formData.uploadedFile && !pdfProcessingComplete && !pdfHasError) {
                    alert('Please wait for the PDF to finish processing before continuing.');
                    return false;
                }
                if (pdfHasError) {
                    const confirmContinue = confirm('The PDF file could not be processed. Would you like to continue without it? You can still paste screenplay text manually.');
                    if (!confirmContinue) {
                        return false;
                    }
                }
            }
            
            // Email validation with confirmation (step 15)
            if (currentStepNumber === 15) {
                const emailField = document.getElementById('email');
                const emailConfirmField = document.getElementById('emailConfirm');
                const mismatchMsg = document.getElementById('emailMismatch');
                
                if (!emailField.value || !isValidEmail(emailField.value)) {
                    emailField.focus();
                    alert('Please enter a valid email address.');
                    return false;
                }
                
                if (emailField.value !== emailConfirmField.value) {
                    mismatchMsg.style.display = 'block';
                    emailConfirmField.focus();
                    alert('Email addresses must match. Please check and re-enter.');
                    return false;
                }
                mismatchMsg.style.display = 'none';
            }
            
            // Country validation (step 1)
            if (currentStepNumber === 1) {
                const countryField = document.getElementById('country');
                if (!countryField.value) {
                    countryField.focus();
                    alert('Please select your country.');
                    return false;
                }
            }
            
            return true;
        }

        function saveCurrentStepData() {
            const currentStep = document.getElementById(`step${currentStepNumber}`);
            const inputs = currentStep.querySelectorAll('input, textarea, select');
            
            inputs.forEach(input => {
                // SKIP HONEYPOT FIELD - don't save it to form data
                if (input.id === 'website' || input.name === 'website') {
                    return; // Skip this iteration
                }
                
                if (input.type === 'checkbox') {
                    if (!formData[input.name]) formData[input.name] = [];
                    if (input.checked && !formData[input.name].includes(input.value)) {
                        formData[input.name].push(input.value);
                    } else if (!input.checked) {
                        formData[input.name] = formData[input.name].filter(val => val !== input.value);
                    }
                } else if (input.type === 'radio') {
                    if (input.checked) {
                        formData[input.name] = input.value;
                    }
                } else {
                    formData[input.name] = input.value;
                }
            });
            
            // If we have extracted PDF text, include it in the script_text field
            if (formData.pdfExtractedText && currentStepNumber === 14) {
                const scriptTextField = document.getElementById('scriptText');
                if (scriptTextField) {
                    // Combine PDF text with any additional text the user typed
                    const manualText = scriptTextField.value;
                    if (manualText && manualText !== formData.pdfExtractedText) {
                        // User added additional text
                        formData.scriptText = formData.pdfExtractedText + '\n\n--- Additional Details ---\n\n' + manualText;
                    } else {
                        // Just use the PDF text
                        formData.scriptText = formData.pdfExtractedText || manualText;
                    }
                }
            }
            
            console.log('Form data saved:', formData);
        }

        async function submitForm() {
            saveCurrentStepData();
            
            // Track form submission attempt
            trackEvent('questionnaire_submit_attempt', 'form', 'festival_ready');
            
            // HONEYPOT CHECK - Bot Detection
            const honeypot = document.getElementById('website');
            if (honeypot && honeypot.value) {
                // Bot detected! Honeypot field was filled
                console.warn('Bot submission detected - honeypot triggered');
                
                // Track the bot attempt
                trackEvent('bot_detected', 'security', 'honeypot_triggered');
                
                try {
                    const { data, error } = await window.supabase
                        .from('bot_attempts')
                        .insert([{
                            form_data: formData,  // All form data as JSON
                            honeypot_value: honeypot.value  // What the bot entered
                        }]);
                        
                    if (error) {
                        console.error('Failed to log bot attempt:', error);
                    } else {
                        console.log('Bot attempt logged successfully');
                    }
                } catch (e) {
                    console.error('Error logging bot attempt:', e);
                    // Don't let this break the flow - silently continue
                }
                
                // Show fake success to the bot
                showSuccessMessage('BOT-DETECTED-' + Date.now());
                return; // Exit without actually submitting
            }
            
            // Show loading state
            nextBtn.textContent = 'Processing...';
            nextBtn.disabled = true;
            
            // Validate email
            if (!formData.email || !isValidEmail(formData.email)) {
                alert('Please provide a valid email address.');
                nextBtn.textContent = 'Generate Materials →';
                nextBtn.disabled = false;
                return;
            }
            
            // Wait for Supabase to be available
            while (!window.supabase) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // Generate custom ID: MM-DD-YYYY-NNNN
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const year = now.getFullYear();
            const randomNum = String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0');
            const customId = `${month}-${day}-${year}-${randomNum}`;
            
            // Handle the new single marketing checkbox
            const marketingOptIn = formData.marketingEmails && formData.marketingEmails.includes('yes');
            
            // Prepare submission data for Supabase
            const submissionData = {
                custom_id: customId,
                email: formData.email,
                country: formData.country || '',
                title: formData.title || '',
                writers: formData.writers || '',
                genres: formData.genres || [],
                page_count: formData.pageCount ? parseInt(formData.pageCount) : null,
                story_type: formData.storyType || '',
                main_characters: formData.mainCharacters || '',
                main_challenge: formData.mainChallenge || '',
                similar_works: formData.similarWorks || '',
                influences: formData.influences || '',
                mature_content: formData.matureContent || '',
                reader_memory: formData.readerMemory || '',
                personal_motivation: formData.personalMotivation || '',
                script_text: formData.scriptText || '',
                additional_details: formData.additionalDetails || '',
                // Map single checkbox to both fields
                update_emails: marketingOptIn,
                festival_discounts: marketingOptIn,
                status: 'pending'
            };
            
            try {
                // Submit to Supabase using real library
                const { data: result, error: insertError } = await window.supabase
                    .from('submissions')
                    .insert([submissionData])
                    .select();
                
                if (insertError) {
                    throw insertError;
                }
                
                console.log('Submission successful:', result);
                
                // Track successful submission
                trackEvent('questionnaire_submitted_successfully', 'form', customId);
                
                // Track marketing opt-in
                if (marketingOptIn) {
                    trackEvent('email_marketing_subscribed', 'engagement', 'combined_opt_in');
                }
                
                // The webhook will handle AI processing automatically
                // No need to call the edge function from here anymore
                
                showSuccessMessage(customId);
                
            } catch (error) {
                console.error('Submission error:', error);
                
                // Track submission error
                trackEvent('questionnaire_submission_error', 'error', error.message);
                
                alert('Something went wrong submitting your questionnaire. Please try again.');
                nextBtn.textContent = 'Generate Materials →';
                nextBtn.disabled = false;
            }
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function showSuccessMessage(submissionId) {
            // Track completion
            trackEvent('questionnaire_completed', 'form', submissionId);
            
            // Replace questionnaire with success message
            document.querySelector('.wizard-container').innerHTML = `
                <div style="text-align: center; padding: 60px 40px;">
                    <h2 style="color: #667eea; margin-bottom: 20px;">🎉 Questionnaire Submitted Successfully!</h2>
                    <p style="font-size: 1.1rem; margin-bottom: 20px;">Thank you! We're now processing your screenplay details.</p>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>📧 Your Results Will Be Emailed To:</strong><br>${formData.email}</p>
                        <p style="margin-top: 15px;"><strong>🆔 Submission ID:</strong><br>${submissionId}</p>
                    </div>
                    <p style="color: #666; font-size: 0.95rem;">You should receive your custom tagline, synopsis, and writer's statement within 15 minutes.</p>
                    <div style="margin-top: 30px;">
                        <a href="index.html" style="background: #667eea; color: white; padding: 12px 25px; border-radius: 25px; text-decoration: none; font-weight: 600;" onclick="trackEvent('return_to_home', 'navigation', 'questionnaire_success')">← Back to Homepage</a>
                    </div>
                </div>
            `;
        }

        // File upload handlers
        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        async function handleFile(file) {
            const maxSize = 10 * 1024 * 1024; // 10MB
            const allowedTypes = ['.pdf'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (file.size > maxSize) {
                alert('File size must be less than 10MB');
                return;
            }
            
            if (!allowedTypes.includes(fileExtension)) {
                alert('Please upload a PDF file only');
                return;
            }
            
            // Track file upload attempt
            trackEvent('pdf_upload_attempt', 'file_upload', `${(file.size / 1024 / 1024).toFixed(2)}MB`);
            
            // Reset processing flags
            pdfProcessingComplete = false;
            pdfHasError = false;
            
            // Show uploaded file UI
            fileInfo.textContent = `${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
            uploadedFile.style.display = 'flex';
            uploadArea.style.display = 'none';
            
            // Store the file reference
            formData.uploadedFile = file;
            
            // Show processing status
            pdfStatus.style.display = 'block';
            pdfStatus.className = 'pdf-status processing';
            pdfStatusMessage.textContent = '🔍 Checking PDF file...';
            pdfProgress.style.display = 'block';
            pdfProgressBar.style.width = '0%';
            
            try {
                // Extract text from PDF
                const text = await extractTextFromPDF(file);
                
                // Store the extracted text
                formData.pdfExtractedText = text;
                pdfProcessingComplete = true;
                
                // Track successful extraction
                trackEvent('pdf_extraction_success', 'file_upload', `${text.length}_characters`);
                
                // Update UI to show success
                pdfStatus.className = 'pdf-status success';
                pdfStatusMessage.innerHTML = `✅ PDF processed successfully! Extracted ${text.length.toLocaleString()} characters from ${file.name}`;
                pdfProgress.style.display = 'none';
                
                // Auto-populate the script text field if it's empty
                const scriptTextField = document.getElementById('scriptText');
                if (scriptTextField && !scriptTextField.value) {
                    scriptTextField.value = text;
                    updateTextStats();
                }
                
                console.log(`Successfully extracted ${text.length} characters from PDF`);
                
            } catch (error) {
                console.error('PDF extraction error:', error);
                pdfHasError = true;
                
                // Track extraction error
                trackEvent('pdf_extraction_error', 'error', error.message);
                
                // Update UI to show error
                pdfStatus.className = 'pdf-status error';
                pdfStatusMessage.innerHTML = `❌ Failed to process PDF: ${error.message}<br><small>Please paste your screenplay text manually below.</small>`;
                pdfProgress.style.display = 'none';
            }
        }

        async function extractTextFromPDF(file) {
            try {
                // Convert file to ArrayBuffer
                const arrayBuffer = await file.arrayBuffer();
                
                // Load the PDF document
                pdfStatusMessage.textContent = '📄 Loading PDF document...';
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                let fullText = '';
                const numPages = pdf.numPages;
                
                console.log(`PDF has ${numPages} pages`);
                
                // Extract text from each page
                for (let pageNum = 1; pageNum <= numPages; pageNum++) {
                    try {
                        const page = await pdf.getPage(pageNum);
                        const textContent = await page.getTextContent();
                        
                        // Filter out any image-related items and combine text
                        const pageText = textContent.items
                            .filter(item => item.str && item.str.trim()) // Only text items
                            .map(item => item.str)
                            .join(' ');
                        
                        if (pageText.trim()) {
                            fullText += pageText + '\n\n';
                        }
                        
                        // Update progress
                        const progress = Math.round((pageNum / numPages) * 100);
                        pdfProgressBar.style.width = `${progress}%`;
                        pdfStatusMessage.textContent = `📄 Extracting text from page ${pageNum} of ${numPages}...`;
                        
                    } catch (pageError) {
                        console.warn(`Error processing page ${pageNum}:`, pageError);
                        // Continue with other pages even if one fails
                    }
                }
                
                // Clean up the text
                fullText = fullText
                    .replace(/\s+/g, ' ')           // Normalize whitespace
                    .replace(/\n{3,}/g, '\n\n')     // Remove excessive line breaks
                    .trim();
                
                if (!fullText || fullText.length < 100) {
                    throw new Error('No readable text found in PDF. The file may be image-based or corrupted.');
                }
                
                return fullText;
                
            } catch (error) {
                console.error('PDF processing error:', error);
                throw new Error(error.message || 'Failed to read PDF file');
            }
        }

        function handleFileRemove() {
            // Track file removal
            trackEvent('pdf_file_removed', 'file_upload', 'user_action');
            
            uploadedFile.style.display = 'none';
            uploadArea.style.display = 'block';
            scriptFile.value = '';
            pdfStatus.style.display = 'none';
            pdfProcessingComplete = false;
            pdfHasError = false;
            delete formData.uploadedFile;
            delete formData.pdfExtractedText;
            
            // Clear the text field if it contains the PDF text
            const scriptTextField = document.getElementById('scriptText');
            if (scriptTextField && formData.pdfExtractedText && scriptTextField.value === formData.pdfExtractedText) {
                scriptTextField.value = '';
                updateTextStats();
            }
        }

        function updateTextStats() {
            const scriptText = document.getElementById('scriptText');
            const statsDiv = document.getElementById('textStats');
            
            if (scriptText && scriptText.value && statsDiv) {
                const charCount = scriptText.value.length;
                const wordCount = scriptText.value.split(/\s+/).filter(word => word.length > 0).length;
                statsDiv.textContent = `${charCount.toLocaleString()} characters, ${wordCount.toLocaleString()} words`;
                
                // Track significant text input milestones
                if (charCount > 1000 && !window.textMilestone1000) {
                    trackEvent('text_input_1000_chars', 'engagement', 'manual_text_entry');
                    window.textMilestone1000 = true;
                }
                if (charCount > 5000 && !window.textMilestone5000) {
                    trackEvent('text_input_5000_chars', 'engagement', 'manual_text_entry');
                    window.textMilestone5000 = true;
                }
            } else if (statsDiv) {
                statsDiv.textContent = '';
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                nextStep();
            }
        });
    </script>
</body>
</html>
