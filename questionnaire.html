<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screenplay Questionnaire - Festival Ready</title>
    <meta name="description" content="Complete our comprehensive screenplay questionnaire to generate professional submission materials">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .wizard-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.2);
            max-width: 700px;
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        
        .wizard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .home-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .home-button:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.1);
            color: white;
            text-decoration: none;
        }
        
        .wizard-header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .wizard-header p {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .progress-container {
            background: rgba(255,255,255,0.2);
            height: 8px;
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: #ff6b6b;
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 6.25%;
        }
        
        .step-content {
            padding: 40px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .step {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .step h2 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .step p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="number"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }
        
        .checkbox-item:hover {
            background: #e9ecef;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .radio-item:hover {
            background: #e9ecef;
        }
        
        .radio-item input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .radio-item.selected {
            background: #667eea;
            color: white;
        }
        
        .wizard-navigation {
            background: #f8f9fa;
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e9ecef;
        }
        
        .nav-button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .nav-button.primary {
            background: #667eea;
            color: white;
        }
        
        .nav-button.primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .nav-button.secondary {
            background: #6c757d;
            color: white;
        }
        
        .nav-button.secondary:hover {
            background: #5a6268;
        }
        
        .nav-button:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .step-indicator {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }
        
        .file-upload-area {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-upload-area:hover {
            background: #f0f3ff;
            border-color: #5a6fd8;
        }
        
        .file-upload-area.dragover {
            background: #e8f2ff;
            border-color: #4dabf7;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .upload-text {
            color: #333;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            color: #666;
            font-size: 0.9rem;
        }
        
        .file-input {
            display: none;
        }
        
        .uploaded-file {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            color: #155724;
        }
        
        .file-info::before {
            content: 'üìÑ';
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .remove-file {
            background: none;
            border: none;
            color: #721c24;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        @media (max-width: 768px) {
            .wizard-container {
                margin: 10px;
            }
            
            .wizard-header {
                padding: 20px;
            }
            
            .wizard-header h1 {
                font-size: 1.5rem;
            }
            
            .home-button {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                top: 15px;
                left: 15px;
            }
            
            .step-content {
                padding: 25px;
                min-height: 350px;
            }
            
            .wizard-navigation {
                padding: 20px 25px;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="wizard-container">
        <div class="wizard-header">
            <a href="index.html" class="home-button" title="Return to Homepage">üè†</a>
            <h1>üé¨ Screenplay Questionnaire</h1>
            <p>Help us create the perfect submission materials for your screenplay</p>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
        
        <div class="step-content">
            <!-- Step 1: Title -->
            <div class="step active" id="step1">
                <h2>What's the title of your screenplay?</h2>
                <p>This will be the main title used in all your submission materials.</p>
                <div class="form-group">
                    <label for="title">Screenplay Title</label>
                    <input type="text" id="title" name="title" placeholder="Enter your screenplay title">
                </div>
            </div>
            
            <!-- Step 2: Writers -->
            <div class="step" id="step2">
                <h2>Who are the primary writers and story contributors?</h2>
                <p>Include all writers, co-writers, and anyone who contributed significantly to the story.</p>
                <div class="form-group">
                    <label for="writers">Writers & Contributors</label>
                    <textarea id="writers" name="writers" placeholder="List all writers and contributors..."></textarea>
                </div>
            </div>
            
            <!-- Step 3: Genre -->
            <div class="step" id="step3">
                <h2>What genre(s) best describe your story?</h2>
                <p>Select all that apply. This helps with festival category recommendations.</p>
                <div class="form-group">
                    <label>Select Genre(s)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="action-thriller" name="genres" value="action-thriller">
                            <label for="action-thriller">Action or Suspense Thriller</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="animation" name="genres" value="animation">
                            <label for="animation">Animation</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comedy" name="genres" value="comedy">
                            <label for="comedy">Comedy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drama" name="genres" value="drama">
                            <label for="drama">Drama</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="experimental" name="genres" value="experimental">
                            <label for="experimental">Experimental</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fantasy" name="genres" value="fantasy">
                            <label for="fantasy">Fantasy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="horror" name="genres" value="horror">
                            <label for="horror">Horror</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mockumentary" name="genres" value="mockumentary">
                            <label for="mockumentary">Mockumentary</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="music-video" name="genres" value="music-video">
                            <label for="music-video">Music Video</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="relationship-drama" name="genres" value="relationship-drama">
                            <label for="relationship-drama">Relationship Drama</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="romantic-comedy" name="genres" value="romantic-comedy">
                            <label for="romantic-comedy">Romantic Comedy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="scifi" name="genres" value="scifi">
                            <label for="scifi">Sci-Fi</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="other-genre" name="genres" value="other">
                            <label for="other-genre">Other</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Step 4: Page Count -->
            <div class="step" id="step4">
                <h2>How many pages is this version of the screenplay?</h2>
                <p>This helps determine the appropriate festival categories and submission guidelines.</p>
                <div class="form-group">
                    <label for="pageCount">Number of Pages</label>
                    <input type="number" id="pageCount" name="pageCount" placeholder="e.g., 90" min="1" max="300">
                </div>
            </div>
            
            <!-- Step 5: Standalone vs Series -->
            <div class="step" id="step5">
                <h2>Is this screenplay a standalone film or part of an ongoing series?</h2>
                <p>This affects how we position your story in submission materials.</p>
                <div class="form-group">
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="standalone" name="storyType" value="standalone">
                            <label for="standalone">Standalone film</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="series" name="storyType" value="series">
                            <label for="series">An episode in an ongoing series. (Teleplay)</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="undecided" name="storyType" value="undecided">
                            <label for="undecided">Undecided</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Step 6: Main Characters -->
            <div class="step" id="step6">
                <h2>Who are the main character(s)?</h2>
                <p>List the primary characters that drive your story forward.</p>
                <div class="form-group">
                    <label for="mainCharacters">Describe Your Main Characters</label>
                    <textarea id="mainCharacters" name="mainCharacters" placeholder="Example: Robert is the father and he interacts with his 9 year old daughter Rebecca the most in this story."></textarea>
                </div>
            </div>
            
            <!-- Step 7: Main Challenge -->
            <div class="step" id="step7">
                <h2>What is the main challenge or stakes that your protagonist faces?</h2>
                <p>Without revealing the ending, describe the central conflict or problem your main character must overcome.</p>
                <div class="form-group">
                    <label for="mainChallenge">Main Challenge/Stakes</label>
                    <textarea id="mainChallenge" name="mainChallenge" placeholder="Example: Robert and Rebecca struggle for survival in a snow covered wasteland."></textarea>
                </div>
            </div>
            
            <!-- Step 8: Similar Films -->
            <div class="step" id="step8">
                <h2>Are there films or series with a similar style or genre?</h2>
                <p>Think "If you liked [Movie/Show], you'll love this story." This helps with marketing comparisons.</p>
                <div class="form-group">
                    <label for="similarWorks">Similar Films/Series</label>
                    <textarea id="similarWorks" name="similarWorks" placeholder="List films or series that share similar style, tone, or audience..."></textarea>
                </div>
            </div>
            
            <!-- Step 9: Influences -->
            <div class="step" id="step9">
                <h2>What influences did you have while writing this story?</h2>
                <p>Include writing style, character, or story influences that shaped your screenplay.</p>
                <div class="form-group">
                    <label for="influences">Writing Influences</label>
                    <textarea id="influences" name="influences" placeholder="Example: Author Stephen King, the Bladerunner movies, etc..."></textarea>
                </div>
            </div>
            
            <!-- Step 10: Mature Content -->
            <div class="step" id="step10">
                <h2>Does your story contain mature content inappropriate for children?</h2>
                <p>This affects festival category selection and content warnings. Detailed descriptions of violence, sexual situations and drug use are examples of mature content that is intended for adults.</p>
                <div class="form-group">
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="mature-yes" name="matureContent" value="yes">
                            <label for="mature-yes">Yes, contains mature content</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="mature-no" name="matureContent" value="no">
                            <label for="mature-no">No, appropriate for all audiences</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="mature-unsure" name="matureContent" value="unsure">
                            <label for="mature-unsure">I'm not sure</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Step 11: Reader Memory -->
            <div class="step" id="step11">
                <h2>What do you hope readers will remember most about your story?</h2>
                <p>This helps us craft taglines and synopses that highlight your story's most memorable elements.</p>
                <div class="form-group">
                    <label for="readerMemory">Most Memorable Aspect</label>
                    <textarea id="readerMemory" name="readerMemory" placeholder="What should stick with readers after they experience your story..."></textarea>
                </div>
            </div>
            
            <!-- Step 12: Personal Motivation -->
            <div class="step" id="step12">
                <h2>Why did you decide to write this particular story?</h2>
                <p>Your personal connection to the story can be powerful in submission materials.</p>
                <div class="form-group">
                    <label for="personalMotivation">Personal Motivation</label>
                    <textarea id="personalMotivation" name="personalMotivation" placeholder="What drove you to write this story..."></textarea>
                </div>
            </div>
            
            <!-- Step 13: Festival Networking -->
            <div class="step" id="step13">
                <h2>Who are you hoping to meet when networking at film festivals?</h2>
                <p>Select all that apply. This helps with festival selection and networking strategy.</p>
                <div class="form-group">
                    <label>Festival Networking Goals</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="actors" name="networking" value="actors">
                            <label for="actors">Actors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="agents" name="networking" value="agents">
                            <label for="agents">Agents</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="animators" name="networking" value="animators">
                            <label for="animators">Animators</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="casting-directors" name="networking" value="casting-directors">
                            <label for="casting-directors">Casting Directors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="composers" name="networking" value="composers">
                            <label for="composers">Composers</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="directors" name="networking" value="directors">
                            <label for="directors">Directors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="distributors" name="networking" value="distributors">
                            <label for="distributors">Distributors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editors" name="networking" value="editors">
                            <label for="editors">Editors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="entertainment-attorneys" name="networking" value="entertainment-attorneys">
                            <label for="entertainment-attorneys">Entertainment Attorneys</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="film-crew" name="networking" value="film-crew">
                            <label for="film-crew">Film Crew</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="graphic-designers" name="networking" value="graphic-designers">
                            <label for="graphic-designers">Graphic Designers</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="investors" name="networking" value="investors">
                            <label for="investors">Investors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="journalists" name="networking" value="journalists">
                            <label for="journalists">Journalists</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="location-scouts" name="networking" value="location-scouts">
                            <label for="location-scouts">Location Scouts</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="photographers" name="networking" value="photographers">
                            <label for="photographers">Photographers</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="producers" name="networking" value="producers">
                            <label for="producers">Producers</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="production-companies" name="networking" value="production-companies">
                            <label for="production-companies">Production Companies</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="screenwriters" name="networking" value="screenwriters">
                            <label for="screenwriters">Screenwriters</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="script-coverage" name="networking" value="script-coverage">
                            <label for="script-coverage">Script Coverage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="wga-members" name="networking" value="wga-members">
                            <label for="wga-members">WGA Members (Writers Guild Of America)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="networking-other" name="networking" value="other">
                            <label for="networking-other">Other</label>
                        </div>
                    </div>
                    <div class="form-group" id="networkingOtherGroup" style="display: none; margin-top: 15px;">
                        <label for="networkingOtherText">Please specify:</label>
                        <input type="text" id="networkingOtherText" name="networkingOtherText" placeholder="Who else would you like to meet?">
                    </div>
                </div>
            </div>
            
            <!-- Step 14: Optional Script Upload -->
            <div class="step" id="step14">
                <h2>Optional: Upload or share some text from your screenplay</h2>
                <p>For the best results, you can upload a PDF of your script or paste the text directly.</p>
                
                <!-- Privacy Disclaimer -->
                <div style="background: #e8f4fd; border: 1px solid #bee5eb; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="color: #0c5460; margin-bottom: 10px; font-size: 1rem;">üîí Privacy & Copyright Protection</h4>
                    <p style="color: #0c5460; font-size: 0.9rem; line-height: 1.5; margin: 0;">
                        The information from your script and story are not distributed to others or made public. This information is for your private use and does not affect copyright or give legal use to your script to a third party. Your creative ideas and work will not be used for AI training purposes.
                    </p>
                </div>
                
                <div class="form-group">
                    <label>Upload Script PDF (Optional)</label>
                    <div class="file-upload-area" id="uploadArea">
                        <div class="upload-icon">üìÑ</div>
                        <div class="upload-text">Click to upload or drag and drop PDF</div>
                        <div class="upload-subtext">PDF files only</div>
                    </div>
                    <input type="file" id="scriptFile" class="file-input" accept=".pdf">
                    <div id="uploadedFile" class="uploaded-file" style="display: none;">
                        <div class="file-info" id="fileInfo"></div>
                        <button type="button" class="remove-file" id="removeFile">√ó</button>
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 30px;">
                    <label for="scriptText">Or paste as much text from your story or screenplay as you'd like:</label>
                    <textarea id="scriptText" name="scriptText" placeholder="Paste your screenplay text here for best results..." style="min-height: 150px;"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="additionalDetails">Additional story details:</label>
                    <textarea id="additionalDetails" name="additionalDetails" placeholder="Any additional details about your story that would help create better submission materials..."></textarea>
                </div>
            </div>
            
            <!-- Step 15: Email Address -->
            <div class="step" id="step15">
                <h2>What's your email address?</h2>
                <p>Please allow 15 minutes for us to send your custom tagline, synopsis, and writer's statement to this email address.</p>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                </div>
                <div style="background: #e8f4fd; border: 1px solid #bee5eb; border-radius: 10px; padding: 15px; margin-top: 15px;">
                    <p style="color: #0c5460; font-size: 0.9rem; margin: 0;">
                        üîí <strong>Privacy:</strong> Your email is only used to send you your results. We don't share your information with any third parties or marketing without your consent.
                    </p>
                </div>
                
                <!-- Email Preferences -->
                <div class="form-group" style="margin-top: 20px;">
                    <div class="checkbox-item" style="margin-bottom: 15px;">
                        <input type="checkbox" id="updateEmails" name="updateEmails" value="yes">
                        <label for="updateEmails">Please check this box if you'd like us to email you when this app is updated.</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="festivalDiscounts" name="festivalDiscounts" value="yes">
                        <label for="festivalDiscounts">Optionally, please check this box if you'd like us to email you a list of discounts and promo codes for the twelve film festivals that we operate in Portland, Austin and Georgia. We welcome your direct screenplay submissions. <a href="https://filmfestivalcircuit.com/submissions" target="_blank" style="color: #667eea; text-decoration: underline;">https://filmfestivalcircuit.com/submissions</a></label>
                    </div>
                </div>
            </div>
            
            <!-- Step 16: Country -->
            <div class="step" id="step16">
                <h2>What country are you from?</h2>
                <p>This helps us better understand our user base and tailor festival recommendations.</p>
                <div class="form-group">
                    <label for="country">Select Your Country</label>
                    <select id="country" name="country" required>
                        <option value="">-- Select Country --</option>
                        <option value="US">United States</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="" disabled>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</option>
                        <option value="AR">Argentina</option>
                        <option value="AT">Austria</option>
                        <option value="BD">Bangladesh</option>
                        <option value="BE">Belgium</option>
                        <option value="BR">Brazil</option>
                        <option value="CL">Chile</option>
                        <option value="CN">China</option>
                        <option value="CO">Colombia</option>
                        <option value="CZ">Czech Republic</option>
                        <option value="DK">Denmark</option>
                        <option value="EG">Egypt</option>
                        <option value="FI">Finland</option>
                        <option value="FR">France</option>
                        <option value="DE">Germany</option>
                        <option value="GR">Greece</option>
                        <option value="HU">Hungary</option>
                        <option value="IN">India</option>
                        <option value="ID">Indonesia</option>
                        <option value="IE">Ireland</option>
                        <option value="IL">Israel</option>
                        <option value="IT">Italy</option>
                        <option value="JP">Japan</option>
                        <option value="KE">Kenya</option>
                        <option value="MY">Malaysia</option>
                        <option value="MX">Mexico</option>
                        <option value="MA">Morocco</option>
                        <option value="NL">Netherlands</option>
                        <option value="NZ">New Zealand</option>
                        <option value="NG">Nigeria</option>
                        <option value="NO">Norway</option>
                        <option value="PK">Pakistan</option>
                        <option value="PE">Peru</option>
                        <option value="PH">Philippines</option>
                        <option value="PL">Poland</option>
                        <option value="PT">Portugal</option>
                        <option value="RO">Romania</option>
                        <option value="RU">Russia</option>
                        <option value="SG">Singapore</option>
                        <option value="ZA">South Africa</option>
                        <option value="KR">South Korea</option>
                        <option value="ES">Spain</option>
                        <option value="SE">Sweden</option>
                        <option value="CH">Switzerland</option>
                        <option value="TH">Thailand</option>
                        <option value="TR">Turkey</option>
                        <option value="UA">Ukraine</option>
                        <option value="GB">United Kingdom</option>
                        <option value="VE">Venezuela</option>
                        <option value="VN">Vietnam</option>
                        <option value="OTHER">Other</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="wizard-navigation">
            <button type="button" class="nav-button secondary" id="prevBtn" disabled>‚Üê Previous</button>
            <div class="step-indicator">
                Step <span id="currentStep">1</span> of 16
            </div>
            <button type="button" class="nav-button primary" id="nextBtn">Next ‚Üí</button>
        </div>
    </div>

    <!-- Import Supabase JS Library -->
    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.45.4';
        
        // Initialize Supabase client with real library
        const SUPABASE_URL = 'https://vmfhxkfprrbshwniguaq.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtZmh4a2ZwcnJic2h3bmlndWFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2ODYxNTcsImV4cCI6MjA2NTI2MjE1N30.k0OdvFzcO1nwZzxsgLPcQBeSITmV6dA_ncXpN0cpAgQ';
        
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Make supabase available globally
        window.supabase = supabase;
    </script>

    <script>
        let currentStepNumber = 1;
        const totalSteps = 16;
        const formData = {};

        // Navigation elements
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const currentStepSpan = document.getElementById('currentStep');

        // File upload elements
        const uploadArea = document.getElementById('uploadArea');
        const scriptFile = document.getElementById('scriptFile');
        const uploadedFile = document.getElementById('uploadedFile');
        const fileInfo = document.getElementById('fileInfo');
        const removeFile = document.getElementById('removeFile');

        // Initialize wizard
        updateStepDisplay();
        setupEventListeners();

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });

            // Show current step
            document.getElementById(`step${currentStepNumber}`).classList.add('active');

            // Update progress bar
            const progress = (currentStepNumber / totalSteps) * 100;
            progressBar.style.width = `${progress}%`;

            // Update step indicator
            currentStepSpan.textContent = currentStepNumber;

            // Update navigation buttons
            prevBtn.disabled = currentStepNumber === 1;
            if (currentStepNumber === totalSteps) {
                nextBtn.textContent = 'Generate Materials ‚Üí';
                nextBtn.classList.add('primary');
            } else {
                nextBtn.textContent = 'Next ‚Üí';
            }
        }

        function setupEventListeners() {
            // Navigation buttons
            prevBtn.addEventListener('click', previousStep);
            nextBtn.addEventListener('click', nextStep);

            // Radio button styling
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    // Remove selected class from all radio items in this group
                    const groupName = this.name;
                    document.querySelectorAll(`input[name="${groupName}"]`).forEach(r => {
                        r.closest('.radio-item').classList.remove('selected');
                    });
                    // Add selected class to current item
                    this.closest('.radio-item').classList.add('selected');
                });
            });

            // Handle "Other" option in networking section
            const networkingOtherCheckbox = document.getElementById('networking-other');
            const networkingOtherGroup = document.getElementById('networkingOtherGroup');
            
            if (networkingOtherCheckbox) {
                networkingOtherCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        networkingOtherGroup.style.display = 'block';
                    } else {
                        networkingOtherGroup.style.display = 'none';
                        document.getElementById('networkingOtherText').value = '';
                    }
                });
            }

            // File upload functionality
            if (uploadArea) {
                uploadArea.addEventListener('click', () => scriptFile.click());
                uploadArea.addEventListener('dragover', handleDragOver);
                uploadArea.addEventListener('drop', handleDrop);
                scriptFile.addEventListener('change', handleFileSelect);
                removeFile.addEventListener('click', handleFileRemove);
            }
        }

        function previousStep() {
            if (currentStepNumber > 1) {
                saveCurrentStepData();
                currentStepNumber--;
                updateStepDisplay();
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                saveCurrentStepData();
                
                if (currentStepNumber < totalSteps) {
                    currentStepNumber++;
                    updateStepDisplay();
                } else {
                    submitForm();
                }
            }
        }

        function validateCurrentStep() {
            const currentStep = document.getElementById(`step${currentStepNumber}`);
            const requiredFields = currentStep.querySelectorAll('input[required], textarea[required], select[required]');
            
            for (let field of requiredFields) {
                if (!field.value.trim()) {
                    field.focus();
                    alert('Please fill in all required fields before continuing.');
                    return false;
                }
            }
            
            // Special validation for checkboxes and radios
            if (currentStepNumber === 3) { // Genre step
                const checkedGenres = currentStep.querySelectorAll('input[name="genres"]:checked');
                if (checkedGenres.length === 0) {
                    alert('Please select at least one genre.');
                    return false;
                }
            }
            
            // Email validation
            if (currentStepNumber === 15) {
                const emailField = document.getElementById('email');
                if (!emailField.value || !isValidEmail(emailField.value)) {
                    emailField.focus();
                    alert('Please enter a valid email address.');
                    return false;
                }
            }
            
            // Country validation
            if (currentStepNumber === 16) {
                const countryField = document.getElementById('country');
                if (!countryField.value) {
                    countryField.focus();
                    alert('Please select your country.');
                    return false;
                }
            }
            
            return true;
        }

        function saveCurrentStepData() {
            const currentStep = document.getElementById(`step${currentStepNumber}`);
            const inputs = currentStep.querySelectorAll('input, textarea, select');
            
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    if (!formData[input.name]) formData[input.name] = [];
                    if (input.checked && !formData[input.name].includes(input.value)) {
                        formData[input.name].push(input.value);
                    } else if (!input.checked) {
                        formData[input.name] = formData[input.name].filter(val => val !== input.value);
                    }
                } else if (input.type === 'radio') {
                    if (input.checked) {
                        formData[input.name] = input.value;
                    }
                } else {
                    formData[input.name] = input.value;
                }
            });
            
            console.log('Form data saved:', formData);
        }

        async function submitForm() {
            saveCurrentStepData();
            
            // Show loading state
            nextBtn.textContent = 'Processing...';
            nextBtn.disabled = true;
            
            // Validate email
            if (!formData.email || !isValidEmail(formData.email)) {
                alert('Please provide a valid email address.');
                nextBtn.textContent = 'Generate Materials ‚Üí';
                nextBtn.disabled = false;
                return;
            }
            
            // Wait for Supabase to be available
            while (!window.supabase) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // Generate custom ID: MM-DD-YYYY-NNNN
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const year = now.getFullYear();
            const randomNum = String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0');
            const customId = `${month}-${day}-${year}-${randomNum}`;
            
            // Prepare submission data for Supabase
            const submissionData = {
                custom_id: customId,
                email: formData.email,
                title: formData.title || '',
                writers: formData.writers || '',
                genres: formData.genres || [],
                page_count: formData.pageCount ? parseInt(formData.pageCount) : null,
                story_type: formData.storyType || '',
                main_characters: formData.mainCharacters || '',
                main_challenge: formData.mainChallenge || '',
                similar_works: formData.similarWorks || '',
                influences: formData.influences || '',
                mature_content: formData.matureContent || '',
                reader_memory: formData.readerMemory || '',
                personal_motivation: formData.personalMotivation || '',
                networking_goals: formData.networking || [],
                networking_other: formData.networkingOtherText || '',
                script_text: formData.scriptText || '',
                additional_details: formData.additionalDetails || '',
                update_emails: formData.updateEmails === 'yes',
                festival_discounts: formData.festivalDiscounts === 'yes',
                country: formData.country || '',
                status: 'pending'
            };
            
            try {
                // Submit to Supabase using real library
                const { data: result, error: insertError } = await window.supabase
                    .from('submissions')
                    .insert([submissionData])
                    .select();
                
                if (insertError) {
                    throw insertError;
                }
                
                console.log('Submission successful:', result);
                
                // Trigger AI processing using Supabase JS
                try {
                    const submissionId = result[0].id;
                    console.log('Triggering AI processing for submission:', submissionId);
                    
                    const { data: processResponse, error: processError } = await window.supabase.functions.invoke('process-screenplay', {
                        body: { submission_id: submissionId }
                    });
                    
                    if (processError) {
                        console.error('Processing failed:', processError);
                    } else {
                        console.log('AI processing triggered successfully:', processResponse);
                    }
                } catch (processError) {
                    console.error('Error triggering AI processing:', processError);
                    // Don't block the success message if processing fails
                }
                
                showSuccessMessage(customId);
                
            } catch (error) {
                console.error('Submission error:', error);
                alert('Something went wrong submitting your questionnaire. Please try again.');
                nextBtn.textContent = 'Generate Materials ‚Üí';
                nextBtn.disabled = false;
            }
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function showSuccessMessage(submissionId) {
            // Replace questionnaire with success message
            document.querySelector('.wizard-container').innerHTML = `
                <div style="text-align: center; padding: 60px 40px;">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üéâ Questionnaire Submitted Successfully!</h2>
                    <p style="font-size: 1.1rem; margin-bottom: 20px;">Thank you! We're now processing your screenplay details.</p>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>üìß Your Results Will Be Emailed To:</strong><br>${formData.email}</p>
                        <p style="margin-top: 15px;"><strong>üÜî Submission ID:</strong><br>${submissionId}</p>
                    </div>
                    <p style="color: #666; font-size: 0.95rem;">You should receive your custom tagline, synopsis, and writer's statement within 15 minutes.</p>
                    <div style="margin-top: 30px;">
                        <a href="index.html" style="background: #667eea; color: white; padding: 12px 25px; border-radius: 25px; text-decoration: none; font-weight: 600;">‚Üê Back to Homepage</a>
                    </div>
                </div>
            `;
        }

        // File upload handlers
        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            const maxSize = 10 * 1024 * 1024; // 10MB
            const allowedTypes = ['.pdf'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (file.size > maxSize) {
                alert('File size must be less than 10MB');
                return;
            }
            
            if (!allowedTypes.includes(fileExtension)) {
                alert('Please upload a PDF file only');
                return;
            }
            
            // Show uploaded file
            fileInfo.textContent = `${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
            uploadedFile.style.display = 'flex';
            uploadArea.style.display = 'none';
            
            formData.uploadedFile = file;
        }

        function handleFileRemove() {
            uploadedFile.style.display = 'none';
            uploadArea.style.display = 'block';
            scriptFile.value = '';
            delete formData.uploadedFile;
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                nextStep();
            }
        });
    </script>
</body>
</html>
